!function(){"use strict";const t=(t,e,n,i,s)=>{const l=document.querySelector(".competitions__value"),o=document.querySelectorAll(".kid-game"),a=document.querySelector(".competitions__button-next"),m=document.querySelector(".button-prev");l.textContent=e[0].value,a.addEventListener("click",(()=>((t,e,n,i,s,l)=>{s.task+=1;const o=document.querySelector(".competitions__value");if(n.classList.remove("competitions__button-all--active"),n.textContent="Выбрать всех!",s.task===e.length){o.classList.add("competitions__value--hidden"),setTimeout((()=>{o.textContent="Просчёт победителей ...",o.classList.remove("competitions__value--hidden")}),500);const e=(t=>{let e=[];t.forEach((t=>{e.push({number:Number(t.firstElementChild.textContent),id:Number(t.firstElementChild.nextElementSibling.textContent)})}));const n=Math.max(...e.map((t=>t.number)));return e=e.filter((t=>t.number===n)),e})(t);((t,e,n)=>{t.classList.remove("modal--hidden"),document.body.style.overflow="hidden";const i=document.querySelector(".modal__winners"),s=document.querySelector(".modal__button");i.innerHTM="",n.forEach((t=>{e.some((e=>e.id===t.id))&&(i.innerHTML+=`\n            <div class="modal__winner">\n                <p class="modal__name">${t.name}</p>\n            </div>\n            `)})),s.addEventListener("click",(()=>{t.classList.add("modal--hidden"),document.body.style.overflow="vissible"}))})(document.querySelector(".modal"),e,i)}else o.classList.add("competitions__value--hidden"),setTimeout((()=>{o.textContent=e[s.task].value,o.classList.remove("competitions__value--hidden")}),500);t.forEach((t=>{const n=Number(t.firstElementChild.textContent),i=t.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.firstElementChild,o=t.lastElementChild;i.style.left=n+"%",window.innerWidth<1031&&100===Math.round(n)&&(i.style.transform="translateX(-50px) translateY(-50%)"),o.classList.remove("kid-game__button--active"),o.textContent="Выбрать!",s.task!==e.length&&l[s.task].some((e=>e===Number(t.firstElementChild.nextElementSibling.textContent)))&&(o.classList.add("kid-game__button--active"),o.textContent="Выбран",t.firstElementChild.textContent=Number(t.firstElementChild.textContent)+100/e.length)}))})(o,e,t,n,s,i))),m.addEventListener("click",(()=>((t,e,n,i,s)=>{if(0!==t.task){t.task-=1;const l=document.querySelector(".competitions__value");n.classList.remove("competitions__button-all--active"),n.textContent="Выбрать всех!",l.classList.add("competitions__value--hidden"),setTimeout((()=>{l.textContent=s[t.task].value,l.classList.remove("competitions__value--hidden")}),500),i.forEach((n=>{const i=n.lastElementChild;if(i.classList.contains("kid-game__button--active")&&(n.firstElementChild.textContent=Number(n.firstElementChild.textContent)-100/s.length,i.classList.remove("kid-game__button--active"),i.textContent="Выбрать!"),e[t.task].some((t=>t===Number(n.firstElementChild.nextElementSibling.textContent)))){n.firstElementChild.textContent=Number(n.firstElementChild.textContent)-100/s.length;const t=Number(n.firstElementChild.textContent);n.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.firstElementChild.style.left=t+"%",n.firstElementChild.textContent=Number(n.firstElementChild.textContent)+100/s.length,i.classList.add("kid-game__button--active")}}))}})(s,i,t,o,e)))},e=()=>{const t=document.querySelector(".button-prev"),e=document.querySelector(".competitions__button-next"),n=document.querySelector(".competitions__example-box");if(window.innerWidth<=500){if(!document.querySelector(".competitions__buttons")){const i=document.createElement("div");i.classList.add("competitions__buttons"),n.appendChild(i),i.appendChild(t),i.appendChild(e)}}else if(n.lastElementChild.classList.contains("competitions__buttons")){const i=n.lastElementChild;n.insertBefore(t,n.childNodes[0]),n.appendChild(e),n.removeChild(i)}};Array.prototype.mutationFilter=function(t){for(let e=0;e<this.length;e++)t(this[e])||this.splice(e,1)},document.addEventListener("DOMContentLoaded",(()=>{const n=JSON.parse(sessionStorage.getItem("kids"));e(),(e=>{const n=document.querySelector(".competitions__kids"),i=document.querySelector(".competitions__button-all"),s=JSON.parse(localStorage.getItem("tasks")),l=(t=>{const e=[];for(let n=0;n<t.length;n++)e.push([]);return e})(s),o={task:0};console.log(l),((t,e,n,i,s,l)=>{e.innerHTML="",t.forEach((t=>{e.innerHTML+=`\n        <article class="kid-game">\n            <span class="hidden">0</span>\n            <span class="hidden">${t.id}</span>\n            <p class="kid-game__name">${t.name}</p>\n            <div class="kid-game__line">\n                <img class="kid-game__image" src="./images/other/games.png" alt="car">\n                <span class="kid-game__bar"></span>\n            </div>\n            <button class="kid-game__button">Выбрать!</button>\n        </article>\n        `}));const o=document.querySelectorAll(".kid-game__button");o.forEach((t=>{t.addEventListener("click",((t,e,n)=>i=>{const s=t.length;if(i.target.classList.contains("kid-game__button--active")){i.target.classList.remove("kid-game__button--active"),i.target.textContent="Выбрать!";let t=Number(i.target.parentElement.firstElementChild.textContent);t-=100/s,e[n.task].mutationFilter((t=>t!==Number(i.target.parentElement.firstElementChild.nextElementSibling.textContent))),i.target.parentElement.firstElementChild.textContent=t}else{i.target.classList.add("kid-game__button--active"),i.target.textContent="Выбран";let t=Number(i.target.parentElement.firstElementChild.textContent);t+=100/s,e[n.task].push(Number(i.target.parentElement.firstElementChild.nextElementSibling.textContent)),i.target.parentElement.firstElementChild.textContent=t}})(i,s,l))})),n.addEventListener("click",((t,e,n,i)=>s=>{const l=e.length;n[i.task].splice(0,n[i.task].length),s.target.classList.contains("competitions__button-all--active")?t.forEach((t=>{if(t.classList.contains("kid-game__button--active")){let e=Number(t.parentElement.firstElementChild.textContent);e-=100/l,t.parentElement.firstElementChild.textContent=e}t.classList.remove("kid-game__button--active"),t.textContent="Выбрать!",s.target.classList.remove("competitions__button-all--active"),s.target.textContent="Выбрать всех!"})):t.forEach((t=>{if(!t.classList.contains("kid-game__button--active")){let e=Number(t.parentElement.firstElementChild.textContent);e+=100/l,t.parentElement.firstElementChild.textContent=e}n[i.task].push(Number(t.parentElement.firstElementChild.nextElementSibling.textContent)),t.classList.add("kid-game__button--active"),t.textContent="Выбран",s.target.classList.add("competitions__button-all--active"),s.target.textContent="Все выбраны!"})),console.log(n)})(o,i,s,l))})(e,n,i,s,l,o),t(i,s,e,l,o)})(n)})),window.addEventListener("resize",e)}();