!function(){"use strict";let t=0;const e=t=>{const e=JSON.parse(localStorage.getItem("tasks")).length;if(t.target.classList.contains("kid-game__button--active")){t.target.classList.remove("kid-game__button--active"),t.target.textContent="Выбрать!";let n=Number(t.target.parentElement.firstElementChild.textContent);n-=100/e,t.target.parentElement.firstElementChild.textContent=n}else{t.target.classList.add("kid-game__button--active"),t.target.textContent="Выбран";let n=Number(t.target.parentElement.firstElementChild.textContent);n+=100/e,t.target.parentElement.firstElementChild.textContent=n}},n=()=>{const n=document.querySelector(".competitions__kids"),i=JSON.parse(sessionStorage.getItem("kids")),s=document.querySelector(".competitions__value"),a=JSON.parse(localStorage.getItem("tasks"));s.textContent=a[0].value,n.innerHTML="",i.forEach((t=>{n.innerHTML+=`\n        <article class="kid-game">\n            <span class="hidden">0</span>\n            <span class="hidden">${t.id}</span>\n            <p class="kid-game__name">${t.name}</p>\n            <div class="kid-game__line">\n                <img class="kid-game__image" src="./images/other/games.png" alt="car">\n                <span class="kid-game__bar"></span>\n            </div>\n            <button class="kid-game__button">Выбрать!</button>\n        </article>\n        `}));const o=document.querySelectorAll(".kid-game"),l=document.querySelectorAll(".kid-game__button"),r=document.querySelector(".competitions__button-all");var c;r.addEventListener("click",(c=l,t=>{const e=JSON.parse(localStorage.getItem("tasks")).length;t.target.classList.contains("competitions__button-all--active")?c.forEach((n=>{if(n.classList.contains("kid-game__button--active")){let t=Number(n.parentElement.firstElementChild.textContent);t-=100/e,n.parentElement.firstElementChild.textContent=t}n.classList.remove("kid-game__button--active"),n.textContent="Выбрать!",t.target.classList.remove("competitions__button-all--active"),t.target.textContent="Выбрать всех!"})):c.forEach((n=>{if(!n.classList.contains("kid-game__button--active")){let t=Number(n.parentElement.firstElementChild.textContent);t+=100/e,n.parentElement.firstElementChild.textContent=t}n.classList.add("kid-game__button--active"),n.textContent="Выбран",t.target.classList.add("competitions__button-all--active"),t.target.textContent="Все выбраны!"}))})),l.forEach((t=>{t.addEventListener("click",e)})),document.querySelector(".competitions__button-next").addEventListener("click",(()=>((e,n,i)=>{t+=1;const s=document.querySelector(".competitions__value");if(i.classList.remove("competitions__button-all--active"),i.textContent="Выбрать всех!",t===n.length){s.classList.add("competitions__value--hidden"),setTimeout((()=>{s.textContent="Просчёт победителей ...",s.classList.remove("competitions__value--hidden")}),500);const t=(t=>{let e=[];t.forEach((t=>{e.push({number:Number(t.firstElementChild.textContent),id:Number(t.firstElementChild.nextElementSibling.textContent)})}));const n=Math.max(...e.map((t=>t.number)));return e=e.filter((t=>t.number===n)),e})(e);((t,e)=>{t.classList.remove("modal--hidden"),document.body.style.overflow="hidden";const n=JSON.parse(sessionStorage.getItem("kids")),i=document.querySelector(".modal__winners"),s=document.querySelector(".modal__button");i.innerHTM="",n.forEach((t=>{e.some((e=>e.id===t.id))&&(i.innerHTML+=`\n            <div class="modal__winner">\n                <p class="modal__name">${t.name}</p>\n            </div>\n            `)})),s.addEventListener("click",(()=>{t.classList.add("modal--hidden"),document.body.style.overflow="vissible"}))})(document.querySelector(".modal"),t)}else s.classList.add("competitions__value--hidden"),setTimeout((()=>{s.textContent=n[t].value,s.classList.remove("competitions__value--hidden")}),500);e.forEach((t=>{const e=Number(t.firstElementChild.textContent),n=t.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.firstElementChild,i=t.lastElementChild;n.style.left=e+"%",window.innerWidth<1031&&100===Math.round(e)&&(n.style.transform="translateX(-50px) translateY(-50%)"),i.classList.remove("kid-game__button--active"),i.textContent="Выбрать!"}))})(o,a,r)))};document.addEventListener("DOMContentLoaded",(()=>{n()}))}();