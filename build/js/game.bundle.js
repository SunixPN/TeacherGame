!function(){"use strict";let t=0;const e=e=>{const n=document.querySelector(".competitions__kids"),i=document.querySelector(".competitions__button-all"),s=JSON.parse(localStorage.getItem("tasks"));((t,e,n,i)=>{e.innerHTML="",t.forEach((t=>{e.innerHTML+=`\n        <article class="kid-game">\n            <span class="hidden">0</span>\n            <span class="hidden">${t.id}</span>\n            <p class="kid-game__name">${t.name}</p>\n            <div class="kid-game__line">\n                <img class="kid-game__image" src="./images/other/games.png" alt="car">\n                <span class="kid-game__bar"></span>\n            </div>\n            <button class="kid-game__button">Выбрать!</button>\n        </article>\n        `}));const s=document.querySelectorAll(".kid-game__button");s.forEach((t=>{t.addEventListener("click",(t=>e=>{const n=t.length;if(e.target.classList.contains("kid-game__button--active")){e.target.classList.remove("kid-game__button--active"),e.target.textContent="Выбрать!";let t=Number(e.target.parentElement.firstElementChild.textContent);t-=100/n,e.target.parentElement.firstElementChild.textContent=t}else{e.target.classList.add("kid-game__button--active"),e.target.textContent="Выбран";let t=Number(e.target.parentElement.firstElementChild.textContent);t+=100/n,e.target.parentElement.firstElementChild.textContent=t}})(i))})),n.addEventListener("click",((t,e)=>n=>{const i=e.length;n.target.classList.contains("competitions__button-all--active")?t.forEach((t=>{if(t.classList.contains("kid-game__button--active")){let e=Number(t.parentElement.firstElementChild.textContent);e-=100/i,t.parentElement.firstElementChild.textContent=e}t.classList.remove("kid-game__button--active"),t.textContent="Выбрать!",n.target.classList.remove("competitions__button-all--active"),n.target.textContent="Выбрать всех!"})):t.forEach((t=>{if(!t.classList.contains("kid-game__button--active")){let e=Number(t.parentElement.firstElementChild.textContent);e+=100/i,t.parentElement.firstElementChild.textContent=e}t.classList.add("kid-game__button--active"),t.textContent="Выбран",n.target.classList.add("competitions__button-all--active"),n.target.textContent="Все выбраны!"}))})(s,i))})(e,n,i,s),((e,n,i)=>{const s=document.querySelector(".competitions__value"),a=document.querySelectorAll(".kid-game"),o=document.querySelector(".competitions__button-next");s.textContent=n[0].value,o.addEventListener("click",(()=>((e,n,i,s)=>{t+=1;const a=document.querySelector(".competitions__value");if(i.classList.remove("competitions__button-all--active"),i.textContent="Выбрать всех!",t===n.length){a.classList.add("competitions__value--hidden"),setTimeout((()=>{a.textContent="Просчёт победителей ...",a.classList.remove("competitions__value--hidden")}),500);const t=(t=>{let e=[];t.forEach((t=>{e.push({number:Number(t.firstElementChild.textContent),id:Number(t.firstElementChild.nextElementSibling.textContent)})}));const n=Math.max(...e.map((t=>t.number)));return e=e.filter((t=>t.number===n)),e})(e);((t,e,n)=>{t.classList.remove("modal--hidden"),document.body.style.overflow="hidden";const i=document.querySelector(".modal__winners"),s=document.querySelector(".modal__button");i.innerHTM="",n.forEach((t=>{e.some((e=>e.id===t.id))&&(i.innerHTML+=`\n            <div class="modal__winner">\n                <p class="modal__name">${t.name}</p>\n            </div>\n            `)})),s.addEventListener("click",(()=>{t.classList.add("modal--hidden"),document.body.style.overflow="vissible"}))})(document.querySelector(".modal"),t,s)}else a.classList.add("competitions__value--hidden"),setTimeout((()=>{a.textContent=n[t].value,a.classList.remove("competitions__value--hidden")}),500);e.forEach((t=>{const e=Number(t.firstElementChild.textContent),n=t.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.firstElementChild,i=t.lastElementChild;n.style.left=e+"%",window.innerWidth<1031&&100===Math.round(e)&&(n.style.transform="translateX(-50px) translateY(-50%)"),i.classList.remove("kid-game__button--active"),i.textContent="Выбрать!"}))})(a,n,e,i)))})(i,s,e)};document.addEventListener("DOMContentLoaded",(()=>{const t=JSON.parse(sessionStorage.getItem("kids"));e(t)}))}();